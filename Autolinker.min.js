/*!
 * Autolinker.js
 * Version 0.2
 * 
 * Copyright(c) 2012 Gregory Jacobs.
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 * 
 * https://github.com/gregjacobs/Autolinker.js
 */
var Autolinker={htmlRegex:/<\/?(\w+)((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/g,link:function(g,l){l=l||{};var a=Autolinker.htmlRegex,e=Autolinker.matcherRegex,j=("newWindow" in l)?l.newWindow:true,k=l.truncate,i,h=0,f,b="";function d(m){m=m.replace(e,function(y,v,u,t,r,p){var x=v,C=t,A=r,q=p,w="",B="",z="";if(!x){return y}else{var n=[];B=y;z=y;if(A){w=C;B="https://twitter.com/"+A;z="@"+A}else{if(q){B="mailto:"+q;z=q}else{if(!/^[A-Za-z]{3,9}:/i.test(B)){B="http://"+B}}}n.push('href="'+B+'"');if(j){n.push('target="_blank"')}if(k&&z.length>k){var s=Math.floor(k/2)-1,o=Math.ceil(k/2)-1;z=z.substring(0,s)+".."+z.substring(z.length-o)}return w+"<a "+n.join(" ")+">"+z+"</a>"}});return m}while((i=a.exec(g))!==null){var c=i[1];if(c!=="a"){f=g.substring(h,i.index);h=i.index+i[0].length;b+=d(f)+i[0]}}if(h<g.length){b+=d(g.substring(h))}return b}};Autolinker.matcherRegex=/<a\b[^<>]*>[\s\S]*?<\/a>|(((^|\s)@(\w{1,15}))|((?:[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+\.[A-Za-z0-9\.\-]+)|((?:(?:(?:[A-Za-z]{3,9}:(?:\/\/)?)[A-Za-z0-9\.\-]*[A-Za-z0-9\-])|(?:(?:www\.)[A-Za-z0-9\.\-]*[A-Za-z0-9\-])|(?:[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.(?:com|org|net|gov|edu|mil|us|info|biz|ws|name|mobi|cc|tv|co\.uk|de|ru|hu|fr|br)))(?:(?:\/[\+~%\/\.\w\-]*)?(?:\?[\-\+=&;%@\.\w]*)?(?:#[\-\.\!\/\\\w%]*)?)?))/g;
